<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IONTOPHORESIS - V√≤ng tay c√¥ng ngh·ªá cao c·∫•p</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
   
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>


    <style>
        /* --- B·∫¢NG M√ÄU & FONT C·ª¶A AURA 3D (T√πy ch·ªânh cho ION) --- */
        :root {
            --primary-blue: #2B92E4;   /* Xanh th∆∞∆°ng hi·ªáu */
            --accent-pink: #F8B5C1;    /* H·ªìng nh·∫•n */
            --soft-gray: #F0F2F5;      /* N·ªÅn x√°m nh·∫°t */
            --text-dark: #333;
            --text-light-gray: #777;
            --border-light: #e0e0e0;
            --button-primary: #007bff; /* Xanh n√∫t */
            --button-hover: #0056b3;
            --input-border: #ccc;
        }


        /* --- C·∫§U H√åNH CHUNG --- */
        body {
            font-family: 'Montserrat', sans-serif;  
            line-height: 1.6;
            margin: 0;
            padding: 0;
            color: var(--text-dark);
            background-color: var(--soft-gray);
            scroll-behavior: smooth;
        }


        .container { width: 90%; max-width: 1200px; margin: auto; padding: 0 15px; }
        section { padding: 60px 0; background-color: #fff; margin-bottom: 20px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }


        /* --- NAVIGATION & LOGIN BAR --- */
        header {
            background: #fff;
            border-bottom: 1px solid var(--border-light);
            position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        header .container { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; }
        .logo { font-size: 1.6em; font-weight: 800; color: var(--primary-blue); text-transform: uppercase; cursor: pointer; }
        .nav-links { list-style: none; display: flex; gap: 30px; margin: 0; padding: 0; }
        .nav-links li { cursor: pointer; color: var(--text-light-gray); font-weight: 600; position: relative; }
        .nav-links li:hover { color: var(--primary-blue); }
        .nav-links li.active { color: var(--primary-blue); }
        .nav-links li.active::after {
            content: '';
            position: absolute; bottom: -5px; left: 0;
            width: 100%; height: 2px; background-color: var(--primary-blue);
        }
       
        .nav-right-icons { display: flex; align-items: center; gap: 15px; }
        .cart-icon { position: relative; font-size: 1.3em; color: var(--primary-blue); cursor: pointer; }
        .cart-count { background-color: var(--accent-pink); color: white; font-size: 0.75em; padding: 2px 6px; border-radius: 50%; font-weight: bold; position: absolute; top: -10px; right: -10px; }
       
        /* --- HOOK TEXT STYLE --- */
        .hook-section {
            background-color: var(--soft-gray);
            padding: 40px;
            border-radius: 20px;
            margin-top: 30px;
            text-align: center;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        .hook-section h3 { color: var(--primary-blue); font-weight: 800; font-size: 1.6em; margin-bottom: 20px; }
        .hook-section ul { list-style: none; padding: 0; margin-bottom: 25px; font-size: 1.1em; }
        .hook-section ul li { margin-bottom: 10px; color: var(--text-dark); font-weight: 600; }


        /* --- LOGIN/REGISTER STYLE --- */
        .login-box { max-width: 400px; margin: auto; padding: 40px; text-align: center; background: white; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .login-box h3 { font-size: 2em; color: var(--primary-blue); margin-bottom: 25px; }
        .form-input { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .btn-auth { background-color: var(--primary-blue); color: white; padding: 12px 0; width: 100%; border-radius: 8px; font-weight: 700; cursor: pointer; transition: 0.3s; margin-top: 5px; border: none;}
        .btn-auth:hover { background-color: var(--button-hover); }


        /* --- PRODUCT CATALOG --- */
        .catalog-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; margin-top: 50px; }
        .product-card { width: 100%; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); text-align: center; transition: transform 0.3s; cursor: pointer; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .product-card model-viewer { height: 200px; width: 100%; }
        .product-card .price { font-size: 1.4em; color: var(--primary-blue); font-weight: 800; }
       
        /* --- PDP LAYOUT & STYLES --- */
        .product-main-view { display: flex; flex-wrap: wrap; gap: 30px; justify-content: center; }
        .col-3d-viewer { flex: 1; min-width: 450px; padding: 20px; background: white; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .col-3d-viewer model-viewer { width: 100%; height: 450px; background-color: #f0f4f8; border-radius: 15px; }
        .col-purchase-info { flex: 1; min-width: 350px; padding: 20px; background: white; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .product-name-detail { font-size: 2em; font-weight: 800; color: var(--text-dark); margin-bottom: 5px; }


        /* --- CART & REVIEW STYLES --- */
        .cart-summary { background: white; padding: 30px; border-radius: 15px; }
        .cart-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #eee; }
        .cart-total { text-align: right; font-size: 1.5em; font-weight: 700; margin-top: 20px; padding-top: 15px; border-top: 2px solid var(--accent-pink); }


        .rating-stars { font-size: 1.8em; cursor: pointer; color: #ccc; }
        .rating-stars .fas { color: #f1c40f; }
        .review-card-dynamic { background: var(--soft-gray); padding: 20px; border-radius: 10px; margin-bottom: 15px; border-left: 5px solid var(--accent-pink); }


        /* --- Global styles for hidden sections --- */
        .page-section { display: none; padding: 50px 0; }
        #trang-chu { display: block; }
        /* === CERTIFICATION + CHART SECTION === */
.cert-chart-section {
    .cert-chart-wrapper {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 50px;
    flex-wrap: nowrap;  /* ‚ùó FIX layout d·ªçc */
}

.cert-logos {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 40px;
}

.cert-item img {
    width: 85px;
    height: auto;
    object-fit: contain;
}

    padding: 50px 0;
    background: #ffffff;
    margin-top: 40px;
}

.cert-chart-wrapper {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 30px;
    flex-wrap: wrap;
}

.cert-left {
    flex: 1;
    min-width: 350px;
}

.cert-logos {
    display: flex;
    gap: 30px;
    margin-top: 15px;
}

.cert-item {
    text-align: center;
}

.cert-item img {
    width: 80px;
    height: auto;
    margin-bottom: 10px;
}

.cert-item p {
    font-size: 0.95em;
    font-weight: 600;
}

/* RIGHT SIDE */
.chart-right {
    flex: 1;
    min-width: 350px;
    text-align: center;
}

.chart-img {
    width: 200px;
    height: auto;
    margin-bottom: 15px;
}

.chart-title {
    font-size: 1.4em;
    font-weight: 800;
    color: #27ae60;
}

.chart-title .percent {
    color: #2ecc71;
    font-size: 1.5em;
}

.chart-sub {
    margin-top: 5px;
    font-size: 0.9em;
    color: #555;
}

    </style>
</head>
<body>


    <header>
        <div class="container">
            <div class="logo" onclick="switchPage('trang-chu')">IONTOPHORESIS</div>
           
            <ul class="nav-links">
                <li onclick="switchPage('trang-chu')" class="active" id="btn-trang-chu">Trang Ch·ªß</li>
                <li onclick="switchPage('san-pham')" id="btn-san-pham">Mua H√†ng</li>
                <li onclick="switchPage('danh-gia')" id="btn-danh-gia">ƒê√°nh Gi√°</li>
                <li onclick="switchPage('lien-he')" id="btn-lien-he">Li√™n H·ªá</li>
            </ul>


            <div class="nav-right-icons">
                <div id="auth-area" style="display: flex; align-items: center; gap: 15px;">
                    <li onclick="switchPage('login')" id="btn-login" style="list-style: none; padding: 0 10px; font-weight: 600; cursor: pointer;">ƒêƒÉng nh·∫≠p</li>
                </div>
               
                <div class="cart-icon" onclick="switchPage('gio-hang')">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cart-counter">0</span>
                </div>
            </div>
        </div>
    </header>


    <div id="trang-chu" class="page-section">
        <div class="container">
            <div class="hook-section">
                <h3>C√≥ nh·ªØng chi ti·∫øt nh·ªè ·∫£nh h∆∞·ªüng ƒë·∫øn h√¨nh ·∫£nh c·ªßa b·∫°n nhi·ªÅu h∆°n b·∫°n nghƒ©.</h3>
                <ul>
                    <li><i class="fas fa-dot-circle" style="color: var(--primary-blue); margin-right: 8px;"></i> M·ªôt c√°i b·∫Øt tay kh√¥ng t·ª± tin.</li>
                    <li><i class="fas fa-dot-circle" style="color: var(--primary-blue); margin-right: 8px;"></i> M·ªôt trang gi·∫•y b·ªã lem.</li>
                    <li><i class="fas fa-dot-circle" style="color: var(--primary-blue); margin-right: 8px;"></i> M·ªôt c√∫ tr∆∞·ª£t chu·ªôt trong l√∫c ƒëang t·∫≠p trung cao ƒë·ªô.</li>
                </ul>
                <p><strong>V√≤ng tay Iontophoresis mini gi·∫£i quy·∫øt ƒëi·ªÅu ƒë√≥ theo c√°ch tinh t·∫ø nh·∫•t:</strong> ƒêeo nh∆∞ ph·ª• ki·ªán, ho·∫°t ƒë·ªông nh∆∞ thi·∫øt b·ªã y t·∫ø ·ª©ng d·ª•ng c√¥ng ngh·ªá t∆∞∆°ng lai.</p>
                <p>Ch·ªâ **15 ph√∫t s·ª≠ d·ª•ng** tr∆∞·ªõc khi l√†m vi·ªác ho·∫∑c thi ƒë·∫•u ‚Äî v√† ƒë√¥i tay c·ªßa b·∫°n lu√¥n ·ªïn ƒë·ªãnh trong nhi·ªÅu gi·ªù li·ªÅn.</p>
            </div>
        </div>
       <section class="cert-chart-section">
    <div class="container cert-chart-wrapper">

        <!-- LEFT SIDE ‚Äì CERTIFICATIONS -->
        <div class="cert-left">
            <h3 class="section-title">Ch·ª©ng Nh·∫≠n Y T·∫ø</h3>

            <div class="cert-logos">
                <div class="cert-item">
                    <img src="ISO13485.jpg" alt="ISO 13485">
                    <p>ISO 13485 ‚Äì Thi·∫øt b·ªã y t·∫ø</p>
                </div>

                <div class="cert-item">
                    <img src="ISO10993.jpg" alt="ISO 10993">
                    <p>ISO 10993 ‚Äì An to√†n ti·∫øp x√∫c da</p>
                </div>

                <div class="cert-item">
                    <img src="IEC60601.jpg" alt="IEC 60601">
                    <p>IEC 60601 ‚Äì Chu·∫©n an to√†n y khoa</p>
                </div>
            </div>
        </div>

        <!-- RIGHT SIDE ‚Äì CHART BLOCK -->
        <div class="chart-right">
            <img src="chart-green.svg" class="chart-img">
            <h3 class="chart-title">Hi·ªáu qu·∫£ gi·∫£m m·ªì h√¥i tay: <span class="percent">+85%</span></h3>
            <p class="chart-sub">Theo k·∫øt qu·∫£ tr·ªã li·ªáu Iontophoresis</p>
        </div>

    </div>
</section>

        <div class="container" style="margin-top: 50px;">
            <h2 class="section-title">Ch·ªçn B·ªô S∆∞u T·∫≠p C·ªßa B·∫°n</h2>


            <div class="catalog-grid">
                <div class="product-card" onclick="loadProductDetailPage('Base')">
                    <model-viewer src="VongTay.glb" shadow-intensity="1" camera-controls auto-rotate style="height: 200px;"></model-viewer>
                    <h4>V√≤ng Ti√™u Chu·∫©n (Base Model)</h4>
                    <p class="price">749.000 VNƒê</p>
                    <button class="btn-main" style="padding: 8px 20px; font-size: 0.9em;">Xem chi ti·∫øt</button>
                </div>


                <div class="product-card" onclick="loadProductDetailPage('MenPremium')">
                    <model-viewer src="VongTayNam.glb" shadow-intensity="1" camera-controls auto-rotate style="height: 200px;"></model-viewer>
                    <h4>V√≤ng Nam (Performance Edition)</h4>
                    <p class="price">999.000 VNƒê</p>
                    <button class="btn-main" style="padding: 8px 20px; font-size: 0.9em;">Xem chi ti·∫øt</button>
                </div>


                <div class="product-card" onclick="loadProductDetailPage('Women')">
                    <model-viewer src="VongNu.glb" shadow-intensity="1" camera-controls auto-rotate style="height: 200px;"></model-viewer>
                    <h4>V√≤ng N·ªØ (Elegant Edition)</h4>
                    <p class="price">849.000 VNƒê</p>
                    <button class="btn-main" style="padding: 8px 20px; font-size: 0.9em;">Xem chi ti·∫øt</button>
                </div>
               
                <div class="product-card" onclick="loadProductDetailPage('Men')">
                    <model-viewer src="VongNam.glb" shadow-intensity="1" camera-controls auto-rotate style="height: 200px;"></model-viewer>
                    <h4>V√≤ng Nam (Classic Edition)</h4>
                    <p class="price">899.000 VNƒê</p>
                    <button class="btn-main" style="padding: 8px 20px; font-size: 0.9em;">Xem chi ti·∫øt</button>
                </div>
            </div>


            <div class="hook-section glass-box" style="background-color: var(--soft-gray); margin-top: 40px; border: 2px dashed var(--primary-blue);">
                <h3 style="color: var(--primary-blue);">üî• H√£y l√† nh·ªØng kh√°ch h√†ng ƒë·∫ßu ti√™n c·ªßa NOTA</h3>
                <p style="font-size: 1.2em; font-weight: 700;">Nh·∫≠n ∆∞u ƒë√£i **10%** cho ƒë∆°n h√†ng ƒë·∫ßu ti√™n ngay h√¥m nay!</p>
            </div>
        </div>
    </div>


    <div id="san-pham" class="page-section">
        <div class="container">
            <h2 class="section-title" style="text-align: left;">Chi Ti·∫øt S·∫£n Ph·∫©m & Mua H√†ng</h2>
           
            <div class="product-main-view">
               
                <div class="col-3d-viewer">
                    <h3 style="color: var(--primary-blue); text-align: center;">Tr·∫£i Nghi·ªám 3D</h3>
                    <p style="text-align: center; font-size: 0.9em; color: var(--text-light-gray);">Xoay m√¥ h√¨nh ƒë·ªÉ xem m·ªçi g√≥c ƒë·ªô. B·∫•m ƒë·ªÉ t·∫°m d·ª´ng.</p>
                   
                    <model-viewer
                        id="pdp-model-viewer"
                        src="VongTay.glb"
                        alt="V√≤ng tay Iontophoresis Mini 3D"
                        shadow-intensity="1"
                        camera-controls
                        auto-rotate
                        ar
                        style="width: 100%; height: 450px; background-color: #f0f4f8; border-radius: 15px;">
                       
                        <div class="engraving-text" id="engravingDisplay3D" style="display: none;" slot="poster">NOTA</div>


                    </model-viewer>
                </div>


                <div class="col-purchase-info">
                    <div class="glass-box">
                        <p class="product-name-detail" id="pdp-name-display">V√≤ng Tay Iontophoresis (Ti√™u Chu·∫©n)</p>
                        <p class="product-status"><i class="fas fa-check-circle"></i> C√≤n h√†ng</p>


                        <div class="price-area">
                            <span class="price-display" id="pdp-price-display">749.000 VNƒê</span>
                            <span style="color: #c0392b; font-weight: 700; font-size: 0.9em;">(∆Øu ƒë√£i 10% ƒë∆°n ƒë·∫ßu ti√™n)</span>
                        </div>


                        <div style="margin-top: 20px;">
                            <p style="font-weight: 700;">D√≤ng S·∫£n ph·∫©m:</p>
                            <select class="custom-input">
                                <option>M√†u Xanh Navy</option>
                                <option>M√†u H·ªìng Pastel</option>
                                <option>M√†u ƒêen C√° T√≠nh</option>
                            </select>


                            <p style="font-weight: 700; margin-top: 15px;">Kh·∫Øc t√™n (mi·ªÖn ph√≠):</p>
                            <input type="text" class="custom-input" placeholder="Nh·∫≠p t√™n (Max 10 k√Ω t·ª±)..." oninput="updateEngraving3D(this.value)" maxlength="10">
                        </div>


                        <div style="margin-top: 30px; border-top: 1px dashed var(--soft-gray); padding-top: 20px;">
                            <button class="btn-main btn-buy-now" onclick="addToCart()">
                                <i class="fas fa-shopping-bag"></i> TH√äM V√ÄO GI·ªé
                            </button>
                            <button class="btn-main btn-buy-now" style="background: var(--primary-blue);" onclick="buyNow()">
                                <i class="fas fa-bolt"></i> MUA NGAY
                            </button>
                        </div>
                    </div>
                </div>
            </div>


            <div class="glass-box" style="margin-top: 30px;">
                <h3 style="border-bottom: 3px solid var(--accent-pink); padding-bottom: 10px; margin-bottom: 20px;">Th√¥ng s·ªë k·ªπ thu·∫≠t & C√¥ng d·ª•ng</h3>


                <div class="row">
                    <div class="col">
                         <h4 style="color: var(--primary-blue); margin-top: 0;">Th√¥ng s·ªë k·ªπ thu·∫≠t</h4>
                         <table class="specs-table">
                            <tr><td>C√¥ng ngh·ªá</td><td>Iontophoresis (ƒêi·ªán di ion)</td></tr>
                            <tr><td>ƒêi·ªán c·ª±c</td><td>2 c·ª±c Th√©p 316L + Pad Hydrogel</td></tr>
                            <tr><td>C∆∞·ªùng ƒë·ªô d√≤ng</td><td>0.5 - 2.0 mA (3 ch·∫ø ƒë·ªô tr·ªã li·ªáu)</td></tr>
                            <tr><td>Pin</td><td>Li-ion 3.7V, s·∫°c Type-C</td></tr>
                            <tr><td>Ch·∫•t li·ªáu d√¢y</td><td>Silicone y t·∫ø</td></tr>
                            <tr><td>Th·ªùi gian tr·ªã li·ªáu</td><td>15 - 20 ph√∫t/l·∫ßn</td></tr>
                        </table>
                    </div>
                   
                    <div class="col">
                        <h4 style="color: var(--primary-blue); margin-top: 0;">C√¥ng d·ª•ng ch√≠nh</h4>
                        <ul>
                            <li><strong>Ki·ªÉm so√°t m·ªì h√¥i:</strong> ·ª®c ch·∫ø tuy·∫øn m·ªì h√¥i t·∫°m th·ªùi, gi·ªØ tay kh√¥ r√°o nhi·ªÅu gi·ªù li·ªÅn.</li>
                            <li><strong>TƒÉng s·ª± t·ª± tin:</strong> Lo·∫°i b·ªè m·∫∑c c·∫£m t√¢m l√Ω, t·ª± tin trong giao ti·∫øp v√† c√¥ng vi·ªác.</li>
                            <li><strong>Hi·ªáu su·∫•t l√†m vi·ªác:</strong> Kh·∫Øc ph·ª•c tr∆°n tr∆∞·ª£t khi c·∫ßm d·ª•ng c·ª•, tƒÉng ƒë·ªô ch√≠nh x√°c khi d√πng thi·∫øt b·ªã ƒëi·ªán t·ª≠.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="gio-hang" class="page-section">
    <div class="container" style="max-width: 900px;">
        <h2 class="section-title">Gi·ªè H√†ng C·ªßa B·∫°n</h2>

        <div class="glass-box cart-summary">
            
            <p id="empty-cart-message" style="text-align:center; color:#888; display:none;">
                Gi·ªè h√†ng ƒëang tr·ªëng.
            </p>

            <div id="cart-item-list"></div>

            <div id="cart-checkout-area" style="margin-top: 20px; display:none;">
                <h3 class="cart-total">
                    T·ªïng ti·ªÅn: <span id="cart-total-amount">0 VNƒê</span>
                </h3>

                <button class="btn-main"
                        style="width: 100%; margin-top: 20px; background: #28a745;"
                        onclick="switchPage('thanh-toan'); renderCheckout();">
                    üîí Thanh To√°n
                </button>
            </div>
        </div>
    </div>
</div>
    <div id="thanh-toan" class="page-section">
    <div class="container" style="max-width: 900px;">
        <h2 class="section-title">Thanh To√°n & Giao H√†ng</h2>

        <div class="glass-box" style="padding: 25px; border-radius: 15px;">
            
            <h3 style="margin-bottom: 15px;">üìç ƒê·ªãa Ch·ªâ Nh·∫≠n H√†ng</h3>
            <input id="checkout-name" class="custom-input" placeholder="H·ªç v√† t√™n">
            <input id="checkout-phone" class="custom-input" placeholder="S·ªë ƒëi·ªán tho·∫°i">
            <input id="checkout-address" class="custom-input" placeholder="ƒê·ªãa ch·ªâ giao h√†ng">

            <h3 style="margin-top: 25px;">üõí S·∫£n ph·∫©m</h3>
            <div id="checkout-items"></div>

            <div id="checkout-discount-box" 
     style="
        margin-top:20px;
        background:#e8f7ff;
        padding:15px;
        border-radius:10px;
        border-left:5px solid #2b92e4;
     ">
    <strong style="color:#2b92e4;">üéâ ∆Øu ƒë√£i d√†nh cho b·∫°n</strong>
    <p style="margin:5px 0 0 0; font-weight:600;">
        Gi·∫£m <span style="color:#d35400;">10%</span> cho ƒë∆°n h√†ng ƒë·∫ßu ti√™n!
    </p>
</div>

            <h3 style="margin-top: 25px;">üí≥ Ph∆∞∆°ng th·ª©c thanh to√°n</h3>
            <select id="checkout-payment" class="custom-input">
                <option>Thanh to√°n khi nh·∫≠n h√†ng (COD)</option>
                <option>Chuy·ªÉn kho·∫£n ng√¢n h√†ng</option>
            </select>

            <h3 style="text-align:right; margin-top: 30px;">
                T·ªïng thanh to√°n: 
                <span id="checkout-total" style="font-weight:800; color:#c0392b;">0 VNƒê</span>
            </h3>

            <button class="btn-main" style="width:100%; background:#ff4500; margin-top:15px;"
                onclick="submitOrder()">
                ƒê·∫∂T H√ÄNG
            </button>
        </div>
    </div>
</div>

    <div id="danh-gia" class="page-section">
        <div class="container">
            <h2 class="section-title">C·ªông ƒê·ªìng N√≥i G√¨?</h2>
           
            <div class="glass-box" id="review-input-area">
                <h3 style="color: var(--primary-blue);">Chia s·∫ª tr·∫£i nghi·ªám c·ªßa b·∫°n</h3>
                <div id="current-user-review-state">
                    <p style="color: red; font-weight: 600;">B·∫°n c·∫ßn ƒêƒÉng nh·∫≠p ƒë·ªÉ vi·∫øt ƒë√°nh gi√°.</p>
                    <button class="btn-main" onclick="switchPage('login')">ƒêƒÉng nh·∫≠p ngay</button>
                </div>
               
                <div id="review-form-area" style="display: none;">
                    <p style="font-weight: 700;">ƒê√°nh gi√° c·ªßa b·∫°n:</p>
                    <div id="rating-stars" class="rating-stars">
                        <i class="far fa-star" data-rating="1" onclick="setRating(1)"></i>
                        <i class="far fa-star" data-rating="2" onclick="setRating(2)"></i>
                        <i class="far fa-star" data-rating="3" onclick="setRating(3)"></i>
                        <i class="far fa-star" data-rating="4" onclick="setRating(4)"></i>
                        <i class="far fa-star" data-rating="5" onclick="setRating(5)"></i>
                    </div>
                    <textarea id="review-text-input" style="width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ddd; margin-top: 10px;" rows="3" placeholder="Vi·∫øt ƒë√°nh gi√° c·ªßa b·∫°n (t·ªëi thi·ªÉu 10 k√Ω t·ª±)..."></textarea>
                    <button class="btn-main" style="margin-top: 10px; font-size: 0.9em; padding: 8px 25px;" onclick="submitReview()">G·ª≠i ƒê√°nh Gi√°</button>
                </div>
            </div>


            <div id="review-list-container" class="review-grid">
                <p style="text-align: center; width: 100%;">ƒêang t·∫£i ƒë√°nh gi√°...</p>
            </div>
        </div>
    </div>


    <div id="lien-he" class="page-section">
        <div class="container">
            <h2 class="section-title">Li√™n H·ªá Nh√≥m NOTA</h2>
            <div class="glass-box" style="max-width: 600px; margin: auto;">
                <p style="text-align: center;"><i class="fas fa-map-marker-alt"></i> ƒê·∫°i h·ªçc Kinh t·∫ø TP.HCM (UEH)</p>
                <p style="text-align: center;"><i class="fas fa-envelope"></i> 2108baonhi@gmail.com</p>
               
                <form style="margin-top: 20px;">
                    <input type="text" placeholder="T√™n c·ªßa b·∫°n" class="custom-input">
                    <input type="email" placeholder="Email" class="custom-input">
                    <textarea placeholder="L·ªùi nh·∫Øn..." rows="4" class="custom-input"></textarea>
                    <button type="button" class="btn-main" style="width: 100%;">G·ª≠i Tin Nh·∫Øn</button>
                </form>
            </div>
        </div>
    </div>
   
    <div id="login" class="page-section">
        <div class="container">
            <div class="glass-box login-box">
                <h3 id="auth-title">ƒêƒÉng Nh·∫≠p</h3>
                <p id="auth-message" style="color: red; margin-bottom: 15px; font-weight: 600; display: none;"></p>
               
                <form id="auth-form">
                    <input type="email" id="auth-email" placeholder="Email (T√™n ƒëƒÉng nh·∫≠p)" class="form-input" required>
                    <input type="password" id="auth-password" placeholder="M·∫≠t kh·∫©u" class="form-input" required>
                   
                    <button type="submit" class="btn-auth" id="main-auth-btn">ƒêƒÇNG NH·∫¨P</button>
                    <p style="margin-top: 15px; font-size: 0.9em; color: #555;">
                        Ch∆∞a c√≥ t√†i kho·∫£n?
                        <a href="#" id="toggle-auth-mode" style="color: var(--primary-blue); font-weight: 700;" onclick="event.preventDefault(); toggleAuthMode();">ƒêƒÉng k√Ω ngay</a>
                    </p>
                </form>
            </div>
        </div>
    </div>




    <footer>
        <div class="container">
            <p><strong>IONTOPHORESIS MINI</strong> - D·ª± √°n Kh·ªüi nghi·ªáp UEH 2025</p>
            <p style="font-size: 0.8em; opacity: 0.7;">Designed by NOTA Team</p>
        </div>
    </footer>


    <script>
        // --- TR·∫†NG TH√ÅI TO√ÄN C·ª§C ---
        const PRODUCT_CATALOG = {
            'Base': { name: "V√≤ng Tay Iontophoresis (Ti√™u Chu·∫©n)", model: "VongTay.glb", price: 749000, displayPrice: "749.000 VNƒê" },
            'MenPremium': { name: "V√≤ng Nam (Performance Edition)", model: "VongTayNam.glb", price: 999000, displayPrice: "999.000 VNƒê" },
            'Women': { name: "V√≤ng N·ªØ (Elegant Edition)", model: "VongNu.glb", price: 849000, displayPrice: "849.000 VNƒê" },
            'Men': { name: "V√≤ng Nam (Classic Edition)", model: "VongNam.glb", price: 899000, displayPrice: "899.000 VNƒê" }
        };
       
        let cartItems = [];
        let currentPDPItemId = 'Base';
        let currentRating = 0; // Tr·∫°ng th√°i ƒë√°nh gi√°
        let currentUser = null; // Tr·∫°ng th√°i ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p
        let authMode = 'login'; // 'login' ho·∫∑c 'register'


        // --- H√ÄM TI·ªÜN √çCH ---


        // Kh·ªüi t·∫°o/L·∫•y d·ªØ li·ªáu t·ª´ LocalStorage
        function initData() {
            // L·∫•y d·ªØ li·ªáu gi·ªè h√†ng (n·∫øu c√≥)
            const storedCart = localStorage.getItem('cart');
            if (storedCart) cartItems = JSON.parse(storedCart);
            document.getElementById('cart-counter').innerText = cartItems.length;


            // Ki·ªÉm tra ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p ch∆∞a
            const loggedInUser = localStorage.getItem('currentUser');
            if (loggedInUser) {
                currentUser = JSON.parse(loggedInUser);
                updateAuthUI(true);
            }
        }
       
        // C·∫≠p nh·∫≠t giao di·ªán ƒêƒÉng nh·∫≠p/Logout
        function updateAuthUI(isLoggedIn) {
            const authArea = document.getElementById('auth-area');
            if (isLoggedIn && currentUser) {
                authArea.innerHTML = `
                    <p style="font-weight: 700; color: var(--text-dark);">Ch√†o, ${currentUser.email.split('@')[0]}</p>
                    <a href="#" style="color: var(--primary-blue); font-weight: 700; text-decoration: none;" onclick="logoutUser()">
                        (Tho√°t)
                    </a>
                `;
            } else {
                 authArea.innerHTML = `
                    <li onclick="switchPage('login')" id="btn-login" style="list-style: none; padding: 0 10px; font-weight: 600; cursor: pointer;">ƒêƒÉng nh·∫≠p</li>
                `;
            }
        }


        // --- LOGIC GI·ªé H√ÄNG ---
       function addToCart() {
        const product = PRODUCT_CATALOG[currentPDPItemId];
            if (!product) return;
             let existingItem = cartItems.find(item => item.id === currentPDPItemId);
              if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cartItems.push({
            id: currentPDPItemId,
            name: product.name,
            price: product.price,
            displayPrice: product.displayPrice,
            quantity: 1
        });
    }

    localStorage.setItem("cart", JSON.stringify(cartItems));
    document.getElementById("cart-counter").innerText = cartItems.length;

    alert(`ƒê√£ th√™m 1 x ${product.name} v√†o gi·ªè h√†ng!`);
}

        function renderCartPage() {
    const listContainer = document.getElementById('cart-item-list');
    const totalAmountSpan = document.getElementById('cart-total-amount');
    const emptyMessage = document.getElementById('empty-cart-message');
    const checkoutArea = document.getElementById('cart-checkout-area');

    listContainer.innerHTML = '';
    let total = 0;

    if (cartItems.length === 0) {
        emptyMessage.style.display = 'block';
        checkoutArea.style.display = 'none';
        return;
    }

    emptyMessage.style.display = 'none';
    checkoutArea.style.display = 'block';

    cartItems.forEach((item, index) => {
        const itemDiv = document.createElement("div");
        itemDiv.classList.add("cart-item");

        itemDiv.innerHTML = `
            <span>${item.name}</span>

            <div style="display:flex; align-items:center; gap:10px;">
                <button onclick="updateQuantity(${index}, -1)"
                    style="padding:5px 10px;">-</button>

                <span>${item.quantity}</span>

                <button onclick="updateQuantity(${index}, 1)"
                    style="padding:5px 10px;">+</button>
            </div>

            <span>${(item.price * item.quantity).toLocaleString('vi-VN')} VNƒê</span>

            <button onclick="removeFromCart(${index})"
                style="color:red; border:none; background:none; cursor:pointer;">
                X√≥a
            </button>
        `;

        listContainer.appendChild(itemDiv);
        total += item.price * item.quantity;
    });

    totalAmountSpan.innerText = total.toLocaleString('vi-VN') + ' VNƒê';
}
function updateQuantity(index, change) {
    cartItems[index].quantity += change;

    if (cartItems[index].quantity <= 0) {
        cartItems.splice(index, 1);
    }

    localStorage.setItem("cart", JSON.stringify(cartItems));
    renderCartPage();
    document.getElementById("cart-counter").innerText = cartItems.length;
}

function removeFromCart(index) {
    cartItems.splice(index, 1);

    localStorage.setItem("cart", JSON.stringify(cartItems));
    renderCartPage();
    document.getElementById("cart-counter").innerText = cartItems.length;
}
function buyNow() {
    // X√≥a gi·ªè h√†ng c≈©
    cartItems = [];

    // Th√™m s·∫£n ph·∫©m hi·ªán t·∫°i v√†o gi·ªè
    const product = PRODUCT_CATALOG[currentPDPItemId];
    cartItems.push({
        id: currentPDPItemId,
        name: product.name,
        price: product.price,
        quantity: 1
    });

    localStorage.setItem("cart", JSON.stringify(cartItems));
    document.getElementById("cart-counter").innerText = 1;

    // Chuy·ªÉn sang trang checkout
    switchPage("thanh-toan");
    renderCheckout();
}
        // --- LOGIC ƒêƒÇNG NH·∫¨P/ƒêƒÇNG K√ù (FIXED) ---
       
        function toggleAuthMode() {
            authMode = authMode === 'login' ? 'register' : 'login';
            document.getElementById('auth-title').innerText = authMode === 'login' ? 'ƒêƒÉng Nh·∫≠p' : 'ƒêƒÉng K√Ω T√†i Kho·∫£n';
            document.getElementById('main-auth-btn').innerText = authMode === 'login' ? 'ƒêƒÇNG NH·∫¨P' : 'ƒêƒÇNG K√ù';
            document.getElementById('toggle-auth-mode').innerText = authMode === 'login' ? 'ƒêƒÉng k√Ω ngay' : 'Quay l·∫°i ƒëƒÉng nh·∫≠p';
            document.getElementById('auth-message').style.display = 'none';
        }


        function loginUser(email, password) {
            const storedUsers = JSON.parse(localStorage.getItem('users') || '[]');
            const user = storedUsers.find(u => u.email === email && u.password === password);


            if (user) {
                localStorage.setItem('currentUser', JSON.stringify(user));
                currentUser = user;
                updateAuthUI(true);
                alert('ƒêƒÉng nh·∫≠p th√†nh c√¥ng!');
                switchPage('trang-chu');
            } else {
                document.getElementById('auth-message').innerText = 'Sai email ho·∫∑c m·∫≠t kh·∫©u.';
                document.getElementById('auth-message').style.display = 'block';
            }
        }


        function registerUser(email, password) {
            let storedUsers = JSON.parse(localStorage.getItem('users') || '[]');


            if (storedUsers.find(u => u.email === email)) {
                document.getElementById('auth-message').innerText = 'Email n√†y ƒë√£ ƒë∆∞·ª£c ƒëƒÉng k√Ω.';
                document.getElementById('auth-message').style.display = 'block';
                return;
            }


            const newUser = { email, password };
            storedUsers.push(newUser);
            localStorage.setItem('users', JSON.stringify(storedUsers));
           
            document.getElementById('auth-message').innerText = 'ƒêƒÉng k√Ω th√†nh c√¥ng! Vui l√≤ng ƒëƒÉng nh·∫≠p.';
            document.getElementById('auth-message').style.display = 'block';
            toggleAuthMode(); // Chuy·ªÉn sang ch·∫ø ƒë·ªô ƒëƒÉng nh·∫≠p
        }
       
        function logoutUser() {
            localStorage.removeItem('currentUser');
            currentUser = null;
            updateAuthUI(false);
            alert('ƒê√£ ƒëƒÉng xu·∫•t.');
            switchPage('trang-chu');
        }


        // --- LOGIC ƒê√ÅNH GI√Å (FIXED) ---


        function getReviews() {
            return JSON.parse(localStorage.getItem('reviews') || JSON.stringify([
                // ƒê√°nh gi√° m·∫∑c ƒë·ªãnh
                { user: 'Tu·∫•n H∆∞ng (VƒêV)', text: "T·ª´ khi d√πng **Active Grip**, m√¨nh ƒë√°nh c·∫ßu l√¥ng t·ª± tin h·∫≥n, kh√¥ng c√≤n b·ªã vƒÉng v·ª£t n·ªØa. C·∫£m gi√°c tay kh√¥ r√°o r·∫•t th√≠ch!", rating: 5 },
                { user: 'B·∫£o Nhi (SV)', text: "M√¨nh mua b·∫£n **Couple** v·ªõi ng∆∞·ªùi y√™u. Thi·∫øt k·∫ø xinh x·ªâu, ƒëeo ƒëi h·ªçc kh√¥ng ai bi·∫øt l√† m√°y tr·ªã li·ªáu lu√¥n.", rating: 4 },
            ]));
        }


        function setRating(rating) {
            currentRating = rating;
            const stars = document.querySelectorAll('#rating-stars i');
            stars.forEach(star => {
                if (parseInt(star.getAttribute('data-rating')) <= rating) {
                    star.classList.remove('far');
                    star.classList.add('fas');
                } else {
                    star.classList.remove('fas');
                    star.classList.add('far');
                }
            });
        }


        function renderStars(rating) {
            let html = '';
            for (let i = 1; i <= 5; i++) {
                html += `<i class="fas fa-star" style="color: ${i <= rating ? '#f1c40f' : '#ccc'};"></i>`;
            }
            return html;
        }


        function renderReviews() {
            const container = document.getElementById('review-list-container');
            const reviewFormArea = document.getElementById('review-form-area');
            const userReviewState = document.getElementById('current-user-review-state');
           
            const reviews = getReviews();
            container.innerHTML = '';


            // C·∫•u h√¨nh giao di·ªán form
            if (currentUser) {
                userReviewState.style.display = 'none';
                reviewFormArea.style.display = 'block';
                setRating(0); // Reset stars
            } else {
                userReviewState.style.display = 'block';
                reviewFormArea.style.display = 'none';
            }


            // Render reviews
            reviews.forEach(review => {
                const card = document.createElement('div');
                card.classList.add('review-card-dynamic');
                card.innerHTML = `
                    <div class="stars">${renderStars(review.rating)}</div>
                    <p>${review.text}</p>
                    <p class="reviewer-info">‚Äî ${review.user}</p>
                `;
                container.appendChild(card);
            });
        }
       
        function submitReview() {
            if (!currentUser) return alert('Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ƒë√°nh gi√°.');
            if (currentRating === 0) return alert('Vui l√≤ng ch·ªçn s·ªë sao ƒë·ªÉ ƒë√°nh gi√°.');
           
            const reviewText = document.getElementById('review-text-input').value;
            if (reviewText.length < 10) return alert('N·ªôi dung ƒë√°nh gi√° ph·∫£i c√≥ √≠t nh·∫•t 10 k√Ω t·ª±.');


            const newReview = {
                user: currentUser.email,
                text: reviewText,
                rating: currentRating,
            };


            let storedReviews = getReviews().filter(r => r.user !== newReview.user); // X√≥a review c≈© c·ªßa user n√†y
            storedReviews.unshift(newReview); // Th√™m review m·ªõi l√™n ƒë·∫ßu
            localStorage.setItem('reviews', JSON.stringify(storedReviews));
           
            document.getElementById('review-text-input').value = '';
            currentRating = 0;
            renderReviews();
            alert('ƒê√°nh gi√° c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c g·ª≠i th√†nh c√¥ng!');
        }




        // --- CHUY·ªÇN TRANG CH√çNH (ƒê√£ s·ª≠a l·ªói Active Menu v√† Load PDP) ---
        function loadProductDetailPage(itemId) {
            const product = PRODUCT_CATALOG[itemId];
            const viewer = document.getElementById('pdp-model-viewer');
           
            if (product) {
                currentPDPItemId = itemId;


                // FIX BUG 1: Bu·ªôc Model Viewer reload b·∫±ng c√°ch x√≥a v√† g√°n l·∫°i SRC
                viewer.removeAttribute('src');
                setTimeout(() => {
                    viewer.setAttribute('src', product.model);
                }, 50);
               
                // C·∫≠p nh·∫≠t Th√¥ng tin mua h√†ng
                document.getElementById('pdp-name-display').innerText = product.name;
                document.getElementById('pdp-price-display').innerText = product.displayPrice;
               
                switchPage('san-pham');
            } else {
                alert("L·ªói: Kh√¥ng t√¨m th·∫•y ID s·∫£n ph·∫©m.");
            }
        }


        function switchPage(pageId, itemId = null) {
            // ·∫®n t·∫•t c·∫£ c√°c trang
            document.querySelectorAll('.page-section').forEach(p => p.style.display = 'none');
            // Hi·ªán trang c·∫ßn thi·∫øt
            document.getElementById(pageId).style.display = 'block';
           
            // X·ª≠ l√Ω Active Menu
            document.querySelectorAll('.nav-links li, #auth-area li').forEach(l => l.classList.remove('active'));
            const btnId = 'btn-' + pageId.replace('-', '');
            const activeBtn = document.getElementById(btnId);
            if(activeBtn) activeBtn.classList.add('active');


            // Logic ƒë·∫∑c bi·ªát cho c√°c trang
            if (pageId === 'san-pham') {
                const productToLoad = itemId || currentPDPItemId;
                loadProductDetailPage(productToLoad);
            } else if (pageId === 'gio-hang') {
                renderCartPage();
            } else if (pageId === 'danh-gia') {
                renderReviews(); // Render reviews khi v√†o trang ƒê√°nh gi√°
            }
           
            window.scrollTo(0, 0);
        }


        // --- KH·ªûI T·∫†O H·ªÜ TH·ªêNG ---
        document.addEventListener('DOMContentLoaded', () => {
            initData(); // L·∫•y data gi·ªè h√†ng v√† user
           
            // X·ª≠ l√Ω submit form (Login/Register)
            document.getElementById('auth-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('auth-email').value;
                const password = document.getElementById('auth-password').value;


                if (authMode === 'login') {
                    loginUser(email, password);
                } else {
                    registerUser(email, password);
                }
            });


            // Kh·ªüi t·∫°o Model Viewer (ch·ªâ c·∫ßn ch·∫°y 1 l·∫ßn)
            document.getElementById('pdp-model-viewer').setAttribute('src', PRODUCT_CATALOG['Base'].model);
            switchPage('trang-chu');
        });
        // === LOAD CHECKOUT PAGE ===
function renderCheckout() {
    const name = localStorage.getItem('checkout_name') || "";
    const phone = localStorage.getItem('checkout_phone') || "";
    const address = localStorage.getItem('checkout_address') || "";

    document.getElementById("checkout-name").value = name;
    document.getElementById("checkout-phone").value = phone;
    document.getElementById("checkout-address").value = address;

    const container = document.getElementById("checkout-items");
    container.innerHTML = "";

    let total = 0;
cartItems.forEach(item => {
    total += item.price * item.quantity;

    container.innerHTML += `
        <div style="padding:8px 0; border-bottom:1px solid #eee;">
            ${item.name} x ${item.quantity}
            <b style="float:right">${(item.price * item.quantity).toLocaleString("vi-VN")} VNƒê</b>
        </div>
    `;
});

// === GI·∫¢M 10% CHO ƒê∆†N H√ÄNG ƒê·∫¶U TI√äN THEO USER ===
let storedUsers = JSON.parse(localStorage.getItem("users") || "[]");

let thisUser = storedUsers.find(u => u.email === currentUser.email);

// N·∫øu user ch∆∞a t·ª´ng ƒë·∫∑t h√†ng ‚Üí gi·∫£m 10%
let isFirstOrder = !thisUser.hasOrderedBefore;
let discount = isFirstOrder ? total * 0.10 : 0;

let finalTotal = total - discount;

// Hi·ªÉn th·ªã UI t·ªïng ‚Äì gi·∫£m ‚Äì c·∫ßn thanh to√°n
document.getElementById("checkout-total").innerHTML = `
    <div style="font-size:1em;">T·ªïng: ${total.toLocaleString("vi-VN")} VNƒê</div>

    ${discount > 0 ? `
        <div style="color:#27ae60; font-weight:700;">
            Gi·∫£m 10% ƒë∆°n ƒë·∫ßu ti√™n: -${discount.toLocaleString("vi-VN")} VNƒê
        </div>` : ""
    }

    <div style="margin-top:5px; font-size:1.3em; font-weight:800; color:#c0392b;">
        C·∫ßn thanh to√°n: ${finalTotal.toLocaleString("vi-VN")} VNƒê
    </div>
`;
}

// === SAVE ADDRESS REALTIME ===
document.addEventListener("input", e => {
    if (e.target.id === "checkout-name") localStorage.setItem("checkout_name", e.target.value);
    if (e.target.id === "checkout-phone") localStorage.setItem("checkout_phone", e.target.value);
    if (e.target.id === "checkout-address") localStorage.setItem("checkout_address", e.target.value);
});


// === SUBMIT ORDER ===
function submitOrder() {
    // ƒë√°nh d·∫•u user ƒë√£ mua
let storedUsers = JSON.parse(localStorage.getItem("users") || "[]");
let thisUser = storedUsers.find(u => u.email === currentUser.email);

if (thisUser) {
    thisUser.hasOrderedBefore = true; 
    localStorage.setItem("users", JSON.stringify(storedUsers));
}

    alert("ƒê·∫∑t h√†ng th√†nh c√¥ng! Th√¥ng tin ƒë√£ l∆∞u.");
    
    // X√≥a gi·ªè h√†ng
    cartItems = [];
    localStorage.setItem("cart", JSON.stringify(cartItems));
    document.getElementById("cart-counter").innerText = 0;
    localStorage.setItem("hasOrderedBefore", "true");
    switchPage("trang-chu");
}
    </script>
</body>
</html>

